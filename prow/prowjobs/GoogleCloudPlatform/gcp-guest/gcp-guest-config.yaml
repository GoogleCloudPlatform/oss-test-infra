presubmits:
  GoogleCloudPlatform/artifact-registry-yum-plugin:
  - name: yum-plugin-presubmit-build
    cluster: gcp-guest
    run_if_changed: "packaging/.*"
    trigger: "(?m)^/packagebuild$"
    rerun_command: "/packagebuild"
    context: prow/presubmit/packagebuild
    decorate: true
    spec:
      containers:
      - image: gcr.io/gcp-guest/daisy-builder:latest
        imagePullPolicy: Always
        command:
        - "/main.sh"
        args: ["gcp-guest", "us-west1-a", "el8"]
  GoogleCloudPlatform/artifact-registry-apt-transport:
  - name: apt-transport-presubmit-build
    cluster: gcp-guest
    run_if_changed: "packaging/.*"
    trigger: "(?m)^/packagebuild$"
    rerun_command: "/packagebuild"
    context: prow/presubmit/packagebuild
    decorate: true
    spec:
      containers:
      - image: gcr.io/gcp-guest/daisy-builder:latest
        imagePullPolicy: Always
        command:
        - "/main.sh"
        args: ["gcp-guest", "us-west1-a", "deb11"]
  - name: apt-transport-presubmit-gocheck
    cluster: gcp-guest
    run_if_changed: '\.go$'
    trigger: "(?m)^/gocheck$"
    rerun_command: "/gocheck"
    context: prow/presubmit/gocheck
    decorate: true
    spec:
      containers:
      - image: gcr.io/gcp-guest/gocheck:latest
        imagePullPolicy: Always
        command:
        - "/go/main.sh"
  - name: apt-transport-presubmit-gobuild
    cluster: gcp-guest
    run_if_changed: '\.go$'
    trigger: "(?m)^/gobuild$"
    rerun_command: "/gobuild"
    context: prow/presubmit/gobuild
    decorate: true
    spec:
      containers:
      - image: gcr.io/gcp-guest/gobuild:latest
        imagePullPolicy: Always
        command:
        - "/go/main.sh"
  - name: apt-transport-presubmit-gotest
    cluster: gcp-guest
    run_if_changed: '\.go$'
    trigger: "(?m)^/gotest$"
    rerun_command: "/gotest"
    context: prow/presubmit/gotest
    decorate: true
    spec:
      containers:
      - image: gcr.io/gcp-guest/gotest:latest
        imagePullPolicy: Always
        command:
        - "/go/main.sh"

  GoogleCloudPlatform/guest-configs:
  - name: gce-presubmit-build
    cluster: gcp-guest
    trigger: "(?m)^/packagebuild$"
    rerun_command: "/packagebuild"
    context: prow/presubmit/packagebuild
    decorate: true
    spec:
      containers:
      - image: gcr.io/gcp-guest/daisy-builder:latest
        imagePullPolicy: Always
        command:
        - "/main.sh"
        args: ["gcp-guest", "us-west1-a", "deb12,deb12_arm64,deb11,el8,el9"]

  GoogleCloudPlatform/guest-diskexpand:
  - name: disk-expand-presubmit-build
    cluster: gcp-guest
    trigger: "(?m)^/packagebuild$"
    rerun_command: "/packagebuild"
    context: prow/presubmit/packagebuild
    decorate: true
    spec:
      containers:
      - image: gcr.io/gcp-guest/daisy-builder:latest
        imagePullPolicy: Always
        command:
        - "/main.sh"
        args: ["gcp-guest", "us-west1-a", "deb11,el8,el9"]

  GoogleCloudPlatform/osconfig:
  - name: osconfig-presubmit-gocheck
    cluster: gcp-guest
    run_if_changed: '\.go$'
    trigger: "(?m)^/gocheck$"
    rerun_command: "/gocheck"
    context: prow/presubmit/gocheck
    decorate: true
    annotations:
      testgrid-dashboards: googleoss-gcp-guest
      testgrid-tab-name: "OSConfig presubmits - gocheck"
    spec:
      containers:
      - image: gcr.io/gcp-guest/gocheck:latest
        imagePullPolicy: Always
        command:
        - "/go/main.sh"
  - name: osconfig-presubmit-gobuild
    cluster: gcp-guest
    run_if_changed: '\.go$'
    trigger: "(?m)^/gobuild$"
    rerun_command: "/gobuild"
    context: prow/presubmit/gobuild
    decorate: true
    annotations:
      testgrid-dashboards: googleoss-gcp-guest
      testgrid-tab-name: "OSConfig presubmits - gobuild"
    spec:
      containers:
      - image: gcr.io/gcp-guest/gobuild:latest
        imagePullPolicy: Always
        command:
        - "/go/main.sh"
  - name: osconfig-presubmit-gotest
    cluster: gcp-guest
    run_if_changed: '\.go$'
    trigger: "(?m)^/gotest$"
    rerun_command: "/gotest"
    context: prow/presubmit/gotest
    decorate: true
    annotations:
      testgrid-dashboards: googleoss-gcp-guest
      testgrid-tab-name: "OSConfig presubmits - gotest"
    spec:
      containers:
      - image: gcr.io/gcp-guest/gotest:latest
        imagePullPolicy: Always
        command:
        - "/go/main.sh"

  GoogleCloudPlatform/guest-agent:
  - name: guest-agent-presubmit-gocheck
    cluster: gcp-guest
    run_if_changed: '\.go$'
    trigger: "(?m)^/gocheck$"
    rerun_command: "/gocheck"
    context: prow/presubmit/gocheck
    decorate: true
    spec:
      containers:
      - image: gcr.io/gcp-guest/gocheck:latest
        imagePullPolicy: Always
        command:
        - "/go/main.sh"
  - name: guest-agent-presubmit-gobuild
    cluster: gcp-guest
    run_if_changed: '\.go$'
    trigger: "(?m)^/gobuild$"
    rerun_command: "/gobuild"
    context: prow/presubmit/gobuild
    decorate: true
    spec:
      containers:
      - image: gcr.io/gcp-guest/gobuild:latest
        imagePullPolicy: Always
        command:
        - "/go/main.sh"
  - name: guest-agent-presubmit-gotest
    cluster: gcp-guest
    run_if_changed: '\.go$'
    trigger: "(?m)^/gotest$"
    rerun_command: "/gotest"
    context: prow/presubmit/gotest
    decorate: true
    spec:
      containers:
      - image: gcr.io/gcp-guest/gotest:latest
        imagePullPolicy: Always
        command:
        - "/go/main.sh"
  - name: guest-agent-presubmit-build
    cluster: gcp-guest
    run_if_changed: "packaging/.*"
    trigger: "(?m)^/packagebuild$"
    rerun_command: "/packagebuild"
    context: prow/presubmit/packagebuild
    decorate: true
    spec:
      containers:
      - image: gcr.io/gcp-guest/daisy-builder:latest
        command:
        - "/main.sh"
        args: ["gcp-guest", "us-west1-a", "deb12,deb12_arm64,deb11,el8,el8_arm64,el9,el9_arm64,goo"]

  GoogleCloudPlatform/guest-logging-go:
  - name: guest-logging-presubmit-gocheck
    cluster: gcp-guest
    run_if_changed: '\.go$'
    trigger: "(?m)^/gocheck$"
    rerun_command: "/gocheck"
    context: prow/presubmit/gocheck
    decorate: true
    spec:
      containers:
      - image: gcr.io/gcp-guest/gocheck:latest
        imagePullPolicy: Always
        command:
        - "/go/main.sh"
  - name: guest-logging-presubmit-gobuild
    cluster: gcp-guest
    run_if_changed: '\.go$'
    trigger: "(?m)^/gobuild$"
    rerun_command: "/gobuild"
    context: prow/presubmit/gobuild
    decorate: true
    spec:
      containers:
      - image: gcr.io/gcp-guest/gobuild:latest
        imagePullPolicy: Always
        command:
        - "/go/main.sh"
  - name: guest-logging-presubmit-gotest
    cluster: gcp-guest
    run_if_changed: '\.go$'
    trigger: "(?m)^/gotest$"
    rerun_command: "/gotest"
    context: prow/presubmit/gotest
    decorate: true
    spec:
      containers:
      - image: gcr.io/gcp-guest/gotest:latest
        imagePullPolicy: Always
        command:
        - "/go/main.sh"

  GoogleCloudPlatform/guest-oslogin:
  - name: oslogin-presubmit-build
    cluster: gcp-guest
    run_if_changed: "packaging/.*"
    trigger: "(?m)^/packagebuild$"
    rerun_command: "/packagebuild"
    context: prow/presubmit/packagebuild
    decorate: true
    spec:
      containers:
      - image: gcr.io/gcp-guest/daisy-builder:latest
        command:
        - "/main.sh"
        args: ["gcp-guest", "us-west1-a", "deb12,deb12_arm64,deb11,el8,el8_arm64,el9,el9_arm64"]
  - name: oslogin-presubmit-selinux-module
    cluster: gcp-guest
    run_if_changed: "policy/"
    trigger: "(?m)^/modcheck$"
    rerun_command: "/modcheck"
    context: prow/presubmit/selinux_module_check
    decorate: true
    spec:
      containers:
      - image: gcr.io/gcp-guest/selinux-tools:latest
        imagePullPolicy: Always
        command:
        - "./selinux/validate.sh"
  - name: oslogin-presubmit-make-prowbuild
    cluster: gcp-guest
    always_run: true
    trigger: "(?m)^/build$"
    rerun_command: "/build"
    context: prow/presubmit/build
    decorate: true
    spec:
      containers:
      - image: gcr.io/gcp-guest/build-essential:latest
        imagePullPolicy: Always
        command:
        - make
        args:
        - prowbuild
  - name: oslogin-presubmit-test
    cluster: gcp-guest
    always_run: true
    trigger: "(?m)^/test$"
    rerun_command: "/test"
    context: prow/presubmit/test
    decorate: true
    spec:
      containers:
      - image: gcr.io/gcp-guest/build-essential:latest
        imagePullPolicy: Always
        command:
        - make
        args:
        - prowtest

  GoogleCloudPlatform/guest-test-infra:
  - name: infra-presubmit-fly-validate-pipelines
    cluster: gcp-guest
    run_if_changed: 'concourse/pipelines'
    trigger: "(?m)^/fly-validate$"
    rerun_command: "/fly-validate"
    context: prow/presubmit/fly-validate-pipelines
    decorate: true
    spec:
      containers:
      - image: gcr.io/gcp-guest/fly-validate-pipelines:latest
        imagePullPolicy: Always
        command:
        - "/main.sh"
        args: ["concourse/pipelines"]
  - name: infra-presubmit-gocheck-root
    cluster: gcp-guest
    run_if_changed: '\.go$'
    trigger: "(?m)^/gocheckroot$"
    rerun_command: "/gocheckroot"
    context: prow/presubmit/gocheck/root
    decorate: true
    spec:
      containers:
      - image: gcr.io/gcp-guest/gocheck:latest
        imagePullPolicy: Always
        command:
        - "/go/main.sh"
  - name: infra-presubmit-gocheck-cleanerupper
    cluster: gcp-guest
    run_if_changed: 'container_images/cleanerupper.*\.go$'
    trigger: "(?m)^/gocheckclean$"
    rerun_command: "/gocheckclean"
    context: prow/presubmit/gocheck/cleanerupper
    decorate: true
    spec:
      containers:
      - image: gcr.io/gcp-guest/gocheck:latest
        imagePullPolicy: Always
        command:
        - "/go/main.sh"
        args:
        - container_images/cleanerupper/
  - name: infra-presubmit-gocheck-registryimage
    cluster: gcp-guest
    run_if_changed: 'container_images/registry-image-forked.*\.go$'
    trigger: "(?m)^/gocheckregimage$"
    rerun_command: "/gocheckregimage"
    context: prow/presubmit/gocheck/registryimage
    decorate: true
    spec:
      containers:
      - image: gcr.io/gcp-guest/gocheck:latest
        imagePullPolicy: Always
        command:
        - "/go/main.sh"
        args:
        - container_images/registry-image-forked/
  - name: infra-presubmit-gobuild-root
    cluster: gcp-guest
    run_if_changed: '(\.go|go\.mod|go\.sum)$'
    trigger: "(?m)^/gobuildroot$"
    rerun_command: "/gobuildroot"
    context: prow/presubmit/gobuild/root
    decorate: true
    spec:
      containers:
      - image: gcr.io/gcp-guest/gobuild:latest
        imagePullPolicy: Always
        command:
        - "/go/main.sh"
  - name: infra-presubmit-gobuild-cleanerupper
    cluster: gcp-guest
    run_if_changed: 'container_images/cleanerupper.*(\.go|go\.mod|go\.sum)$'
    trigger: "(?m)^/gobuildclean$"
    rerun_command: "/gobuildclean"
    context: prow/presubmit/gobuild/cleanerupper
    decorate: true
    spec:
      containers:
      - image: gcr.io/gcp-guest/gobuild:latest
        imagePullPolicy: Always
        command:
        - "/go/main.sh"
        args:
        - container_images/cleanerupper/
  - name: infra-presubmit-gobuild-registryimage
    cluster: gcp-guest
    run_if_changed: 'container_images/registry-image-forked.*(\.go|go\.mod|go\.sum)$'
    trigger: "(?m)^/gobuildregimage$"
    rerun_command: "/gobuildregimage"
    context: prow/presubmit/gobuild/registryimage
    decorate: true
    spec:
      containers:
      - image: gcr.io/gcp-guest/gobuild:latest
        imagePullPolicy: Always
        command:
        - "/go/main.sh"
        args:
        - container_images/registry-image-forked/
  - name: infra-presubmit-gotest-root
    cluster: gcp-guest
    run_if_changed: '(\.go|go\.mod|go\.sum)$'
    trigger: "(?m)^/gotestroot$"
    rerun_command: "/gotestroot"
    context: prow/presubmit/gotest/root
    decorate: true
    spec:
      containers:
      - image: gcr.io/gcp-guest/gotest:latest
        imagePullPolicy: Always
        command:
        - "/go/main.sh"
  - name: infra-presubmit-gotest-cleanerupper
    cluster: gcp-guest
    run_if_changed: 'container_images/cleanerupper.*(\.go|go\.mod|go\.sum)$'
    trigger: "(?m)^/gotestclean$"
    rerun_command: "/gotestclean"
    context: prow/presubmit/gotest/cleanerupper
    decorate: true
    spec:
      containers:
      - image: gcr.io/gcp-guest/gotest:latest
        imagePullPolicy: Always
        command:
        - "/go/main.sh"
        args:
        - container_images/cleanerupper/
  - name: infra-presubmit-gotest-registryimage
    cluster: gcp-guest
    run_if_changed: 'container_images/registry-image-forked.*(\.go|go\.mod|go\.sum)$'
    trigger: "(?m)^/gotestregimage$"
    rerun_command: "/gotestregimage"
    context: prow/presubmit/gotest/registryimage
    decorate: true
    spec:
      containers:
      - image: gcr.io/gcp-guest/gotest:latest
        imagePullPolicy: Always
        command:
        - "/go/main.sh"
        args:
        - container_images/registry-image-forked/



periodics:
# Due to lack of hardware, A3U and A4 need specific reservations for tests.
# TODO: Once reservations are no longer needed, combine them.
- name: cit-periodics-accelerator-images-accelerator-tests-a3u
  cluster: gcp-guest
  decorate: true
  decoration_config:
    timeout: 6h
  annotations:
    testgrid-dashboards: googleoss-gcp-guest
    testgrid-tab-name: cit-periodics-accelerator-images-accelerator-tests-a3u
  # Run at 8PM every night to avoid conflicting with daily usage
  cron: "00 04 * * *"
  spec:
    containers:
    - image: gcr.io/compute-image-tools/cloud-image-tests:latest
      imagePullPolicy: Always
      command:
      - "/manager"
      args:
# Don't copy+paste this! This has extra tests for accelerators. Use a different periodic.
      - "-parallel_count=1"
      - "-project=compute-image-test-pool-001"
      - "-zone=europe-west1-b"
# Please keep this field ordered by version order (eg 7 -> 8 -> 9). Arch should go (amd64 -> arm64).
      - "-images=projects/rocky-linux-accelerator-cloud/global/images/family/rocky-linux-8-optimized-gcp-nvidia-latest,projects/rocky-linux-accelerator-cloud/global/images/family/rocky-linux-9-optimized-gcp-nvidia-latest,projects/ubuntu-os-accelerator-images/global/images/family/ubuntu-accelerator-2204-amd64-with-nvidia-570,projects/ubuntu-os-accelerator-images/global/images/family/ubuntu-accelerator-2404-amd64-with-nvidia-570"
# This project is allowlisted for some necessary quota. TODO: switch to a non -001 test pool. 001 is intended for humans.
      - "-test_projects=compute-image-test-pool-001"
      - "-filter=^(acceleratorrdma|acceleratorconfig)$"
      - "-set_exit_status=false"
      - "-compute_endpoint_override=https://www.googleapis.com/compute/alpha/"
      - "-use_reservations=true"
      - "-reservation_urls=nvidia-h200-8mx2qd0luip8o"
      - "-x86_shape=a3-ultragpu-8g"
      - "-accelerator_type=nvidia-h200-141gb"
- name: cit-periodics-accelerator-images-accelerator-tests-a4
  cluster: gcp-guest
  decorate: true
  decoration_config:
    timeout: 6h
  annotations:
    testgrid-dashboards: googleoss-gcp-guest
    testgrid-tab-name: cit-periodics-accelerator-images-accelerator-tests-a4
  # Run at 8PM every night to avoid conflicting with daily usage
  cron: "00 04 * * *"
  spec:
    containers:
    - image: gcr.io/compute-image-tools/cloud-image-tests:latest
      imagePullPolicy: Always
      command:
      - "/manager"
      args:
# Don't copy+paste this! This has extra tests for accelerators. Use a different periodic.
      - "-parallel_count=1"
      - "-project=compute-image-test-pool-001"
      - "-zone=us-central1-b"
# Please keep this field ordered by version order (eg 7 -> 8 -> 9). Arch should go (amd64 -> arm64).
      - "-images=projects/rocky-linux-accelerator-cloud/global/images/family/rocky-linux-8-optimized-gcp-nvidia-latest,projects/rocky-linux-accelerator-cloud/global/images/family/rocky-linux-9-optimized-gcp-nvidia-latest,projects/ubuntu-os-accelerator-images/global/images/family/ubuntu-accelerator-2204-amd64-with-nvidia-570,projects/ubuntu-os-accelerator-images/global/images/family/ubuntu-accelerator-2404-amd64-with-nvidia-570"
# This project is allowlisted for some necessary quota. TODO: switch to a non -001 test pool. 001 is intended for humans.
      - "-test_projects=compute-image-test-pool-001"
      - "-filter=^(acceleratorrdma|acceleratorconfig)$"
      - "-set_exit_status=false"
      - "-compute_endpoint_override=https://www.googleapis.com/compute/alpha/"
      - "-use_reservations=true"
      - "-reservation_urls=nvidia-b200-9r888mvujoxrz"
      - "-x86_shape=a4-highgpu-8g"
      - "-accelerator_type=nvidia-b200"
- name: cit-periodics-accelerator-images
  cluster: gcp-guest
  decorate: true
  decoration_config:
    timeout: 6h
  annotations:
    testgrid-dashboards: googleoss-gcp-guest
    testgrid-tab-name: cit-periodics-accelerator-images
  interval: 6h
  spec:
    containers:
    - image: gcr.io/compute-image-tools/cloud-image-tests:latest
      imagePullPolicy: Always
      command:
      - "/manager"
      args:
      - "-parallel_count=5"
      - "-project=gcp-guest"
      - "-zone=us-central1-b"
      - "-timeout=20m"
# Please keep this field ordered by version order (eg 7 -> 8 -> 9). Arch should go (amd64 -> arm64).
      - "-images=projects/rocky-linux-accelerator-cloud/global/images/family/rocky-linux-8-optimized-gcp-nvidia-latest,projects/rocky-linux-accelerator-cloud/global/images/family/rocky-linux-9-optimized-gcp-nvidia-latest,projects/ubuntu-os-accelerator-images/global/images/family/ubuntu-accelerator-2204-amd64-with-nvidia-550,projects/ubuntu-os-accelerator-images/global/images/family/ubuntu-accelerator-2404-amd64-with-nvidia-550"
      - "-test_projects=compute-image-test-pool-002,compute-image-test-pool-003,compute-image-test-pool-004,compute-image-test-pool-005"
      - "-filter=^(cvm|livemigrate|suspendresume|loadbalancer|guestagent|hostnamevalidation|imageboot|licensevalidation|network|security|hotattach|lssd|disk|packagevalidation|ssh|metadata|sql|vmspec)$"
      - "-set_exit_status=false"
- name: cit-periodics-almalinux
  cluster: gcp-guest
  decorate: true
  decoration_config:
    timeout: 6h
  annotations:
    testgrid-dashboards: googleoss-gcp-guest
    testgrid-tab-name: cit-periodics-almalinux
  interval: 6h
  spec:
    containers:
    - image: gcr.io/compute-image-tools/cloud-image-tests:latest
      imagePullPolicy: Always
      command:
      - "/manager"
      args:
      - "-parallel_count=5"
      - "-project=gcp-guest"
      - "-zone=us-central1-b"
# Please keep this field ordered by version order (eg 7 -> 8 -> 9). Arch should go (amd64 -> arm64).
      - "-images=projects/almalinux-cloud/global/images/family/almalinux-8,projects/almalinux-cloud/global/images/family/almalinux-9"
      - "-test_projects=compute-image-test-pool-002,compute-image-test-pool-003,compute-image-test-pool-004,compute-image-test-pool-005"
      - "-filter=^(cvm|livemigrate|suspendresume|loadbalancer|guestagent|hostnamevalidation|imageboot|licensevalidation|network|security|hotattach|lssd|disk|packagevalidation|ssh|metadata|sql|vmspec)$"
      - "-set_exit_status=false"
- name: cit-periodics-centos
  cluster: gcp-guest
  decorate: true
  decoration_config:
    timeout: 8h
  annotations:
    testgrid-dashboards: googleoss-gcp-guest
    testgrid-tab-name: cit-periodics-centos
  interval: 8h
  spec:
    containers:
    - image: gcr.io/compute-image-tools/cloud-image-tests:latest
      imagePullPolicy: Always
      command:
      - "/manager"
      args:
      - "-parallel_count=5"
      - "-project=gcp-guest"
      - "-zone=us-central1-b"
# Please keep this field ordered by version order and arch (eg 7 -> 8 amd64 -> 8 arm64 -> 9 amd64 -> 9 arm64).
      - "-images=projects/centos-cloud/global/images/family/centos-stream-9,projects/centos-cloud/global/images/family/centos-stream-9-arm64"
      - "-test_projects=compute-image-test-pool-002,compute-image-test-pool-003,compute-image-test-pool-004,compute-image-test-pool-005"
      - "-filter=^(cvm|livemigrate|suspendresume|loadbalancer|guestagent|hostnamevalidation|imageboot|licensevalidation|network|security|hotattach|lssd|disk|packagevalidation|ssh|metadata|sql|vmspec)$"
      - "-set_exit_status=false"
- name: cit-periodics-debian
  cluster: gcp-guest
  decorate: true
  decoration_config:
    timeout: 8h
  annotations:
    testgrid-dashboards: googleoss-gcp-guest
    testgrid-tab-name: cit-periodics-debian
  interval: 8h
  spec:
    containers:
    - image: gcr.io/compute-image-tools/cloud-image-tests:latest
      imagePullPolicy: Always
      command:
      - "/manager"
      args:
      - "-parallel_count=5"
      - "-project=gcp-guest"
      - "-zone=us-central1-b"
# Please keep this field ordered by version order and arch (eg 7 -> 8 amd64 -> 8 arm64 -> 9 amd64 -> 9 arm64).
      - "-images=projects/debian-cloud/global/images/family/debian-11,projects/debian-cloud/global/images/family/debian-12,projects/debian-cloud/global/images/family/debian-12-arm64"
      - "-test_projects=compute-image-test-pool-002,compute-image-test-pool-003,compute-image-test-pool-004,compute-image-test-pool-005"
      - "-filter=^(cvm|livemigrate|suspendresume|loadbalancer|guestagent|hostnamevalidation|imageboot|licensevalidation|network|security|hotattach|lssd|disk|packagevalidation|ssh|metadata|sql|vmspec)$"
      - "-set_exit_status=false"
- name: cit-periodics-opensuse
  cluster: gcp-guest
  decorate: true
  decoration_config:
    timeout: 8h
  annotations:
    testgrid-dashboards: googleoss-gcp-guest
    testgrid-tab-name: cit-periodics-opensuse
  interval: 8h
  spec:
    containers:
    - image: gcr.io/compute-image-tools/cloud-image-tests:latest
      imagePullPolicy: Always
      command:
      - "/manager"
      args:
      - "-parallel_count=5"
      - "-project=gcp-guest"
      - "-zone=us-central1-b"
# Please keep this field ordered by version order and arch (eg 7 -> 8 amd64 -> 8 arm64 -> 9 amd64 -> 9 arm64).
      - "-images=projects/opensuse-cloud/global/images/family/opensuse-leap,projects/opensuse-cloud/global/images/family/opensuse-leap-arm64"
      - "-test_projects=compute-image-test-pool-002,compute-image-test-pool-003,compute-image-test-pool-004,compute-image-test-pool-005"
      - "-filter=^(cvm|livemigrate|suspendresume|loadbalancer|guestagent|hostnamevalidation|imageboot|licensevalidation|network|security|hotattach|lssd|disk|packagevalidation|ssh|metadata|sql|vmspec)$"
      - "-set_exit_status=false"
- name: cit-periodics-rhel
  cluster: gcp-guest
  decorate: true
  decoration_config:
    timeout: 8h
  annotations:
    testgrid-dashboards: googleoss-gcp-guest
    testgrid-tab-name: cit-periodics-rhel
  interval: 8h
  spec:
    containers:
    - image: gcr.io/compute-image-tools/cloud-image-tests:latest
      imagePullPolicy: Always
      command:
      - "/manager"
      args:
      - "-parallel_count=5"
      - "-project=gcp-guest"
      - "-zone=us-central1-b"
# Please keep this field ordered by version order (eg 7 -> 8 -> 9). Arch should go (amd64 -> arm64).
      - "-images=projects/rhel-cloud/global/images/family/rhel-8,projects/rhel-cloud/global/images/family/rhel-9,projects/rhel-cloud/global/images/family/rhel-9-arm64"
      - "-test_projects=compute-image-test-pool-002,compute-image-test-pool-003,compute-image-test-pool-004,compute-image-test-pool-005"
      - "-filter=^(cvm|livemigrate|suspendresume|loadbalancer|guestagent|hostnamevalidation|imageboot|licensevalidation|network|security|hotattach|lssd|disk|packagevalidation|ssh|metadata|sql|vmspec)$"
      - "-set_exit_status=false"
- name: cit-periodics-rhel-sap
  cluster: gcp-guest
  decorate: true
  decoration_config:
    timeout: 8h
  annotations:
    testgrid-dashboards: googleoss-gcp-guest
    testgrid-tab-name: cit-periodics-rhel-sap
  interval: 8h
  spec:
    containers:
    - image: gcr.io/compute-image-tools/cloud-image-tests:latest
      imagePullPolicy: Always
      command:
      - "/manager"
      args:
      - "-parallel_count=5"
      - "-project=gcp-guest"
      - "-zone=us-central1-b"
# Please keep this field ordered by version order (eg 7 -> 8 -> 9). Arch should go (amd64 -> arm64).
      - "-images=projects/rhel-sap-cloud/global/images/family/rhel-8-6-sap-ha,projects/rhel-sap-cloud/global/images/family/rhel-8-8-sap-ha,projects/rhel-sap-cloud/global/images/family/rhel-8-10-sap-ha,projects/rhel-sap-cloud/global/images/family/rhel-9-0-sap-ha,projects/rhel-sap-cloud/global/images/family/rhel-9-2-sap-ha,projects/rhel-sap-cloud/global/images/family/rhel-9-4-sap-ha"
      - "-test_projects=compute-image-test-pool-002,compute-image-test-pool-003,compute-image-test-pool-004,compute-image-test-pool-005"
      - "-filter=^(cvm|livemigrate|suspendresume|loadbalancer|guestagent|hostnamevalidation|imageboot|licensevalidation|network|security|hotattach|lssd|disk|packagevalidation|ssh|metadata|sql|vmspec)$"
      - "-set_exit_status=false"
- name: cit-periodics-rocky
  cluster: gcp-guest
  decorate: true
  decoration_config:
    timeout: 8h
  annotations:
    testgrid-dashboards: googleoss-gcp-guest
    testgrid-tab-name: cit-periodics-rocky
  interval: 8h
  spec:
    containers:
    - image: gcr.io/compute-image-tools/cloud-image-tests:latest
      imagePullPolicy: Always
      command:
      - "/manager"
      args:
      - "-parallel_count=5"
      - "-project=gcp-guest"
      - "-zone=us-central1-b"
# Please keep this field ordered by version order and arch (eg 7 -> 8 amd64 -> 8 arm64 -> 9 amd64 -> 9 arm64).
      - "-images=projects/rocky-linux-cloud/global/images/family/rocky-linux-8,projects/rocky-linux-cloud/global/images/family/rocky-linux-8-optimized-gcp,projects/rocky-linux-cloud/global/images/family/rocky-linux-8-optimized-gcp-arm64,projects/rocky-linux-cloud/global/images/family/rocky-linux-9,projects/rocky-linux-cloud/global/images/family/rocky-linux-9-optimized-gcp,projects/rocky-linux-cloud/global/images/family/rocky-linux-9-arm64,projects/rocky-linux-cloud/global/images/family/rocky-linux-9-optimized-gcp-arm64"
      - "-test_projects=compute-image-test-pool-002,compute-image-test-pool-003,compute-image-test-pool-004,compute-image-test-pool-005"
      - "-filter=^(cvm|livemigrate|suspendresume|loadbalancer|guestagent|hostnamevalidation|imageboot|licensevalidation|network|security|hotattach|lssd|disk|packagevalidation|ssh|metadata|sql|vmspec)$"
      - "-set_exit_status=false"
- name: cit-periodics-sles
  cluster: gcp-guest
  decorate: true
  decoration_config:
    timeout: 8h
  annotations:
    testgrid-dashboards: googleoss-gcp-guest
    testgrid-tab-name: cit-periodics-sles
  interval: 8h
  spec:
    containers:
    - image: gcr.io/compute-image-tools/cloud-image-tests:latest
      imagePullPolicy: Always
      command:
      - "/manager"
      args:
      - "-parallel_count=5"
      - "-project=gcp-guest"
      - "-zone=us-central1-b"
# Please keep this field ordered by version order and arch (eg 7 -> 8 amd64 -> 8 arm64 -> 9 amd64 -> 9 arm64).
      - "-images=projects/suse-cloud/global/images/family/sles-12,projects/suse-cloud/global/images/family/sles-15-sp5,projects/suse-cloud/global/images/family/sles-15-sp5-arm64,projects/suse-cloud/global/images/family/sles-15,projects/suse-cloud/global/images/family/sles-15-arm64"
      - "-test_projects=compute-image-test-pool-002,compute-image-test-pool-003,compute-image-test-pool-004,compute-image-test-pool-005"
      - "-filter=^(cvm|livemigrate|suspendresume|loadbalancer|guestagent|hostnamevalidation|imageboot|licensevalidation|network|security|hotattach|lssd|disk|packagevalidation|ssh|metadata|sql|vmspec)$"
      - "-set_exit_status=false"
- name: cit-periodics-ubuntu
  cluster: gcp-guest
  decorate: true
  decoration_config:
    timeout: 8h
  annotations:
    testgrid-dashboards: googleoss-gcp-guest
    testgrid-tab-name: cit-periodics-ubuntu
  interval: 8h
  spec:
    containers:
    - image: gcr.io/compute-image-tools/cloud-image-tests:latest
      imagePullPolicy: Always
      command:
      - "/manager"
      args:
      - "-parallel_count=5"
      - "-project=gcp-guest"
      - "-zone=us-central1-b"
# Please keep this field ordered by version order and arch (eg 7 -> 8 amd64 -> 8 arm64 -> 9 amd64 -> 9 arm64).
      - "-images=projects/ubuntu-os-cloud/global/images/family/ubuntu-2204-lts,projects/ubuntu-os-cloud/global/images/family/ubuntu-2204-lts-arm64,projects/ubuntu-os-cloud/global/images/family/ubuntu-2404-lts-amd64,projects/ubuntu-os-cloud/global/images/family/ubuntu-2404-lts-arm64"
      - "-test_projects=compute-image-test-pool-002,compute-image-test-pool-003,compute-image-test-pool-004,compute-image-test-pool-005"
      - "-filter=^(cvm|livemigrate|suspendresume|loadbalancer|guestagent|hostnamevalidation|imageboot|licensevalidation|network|security|hotattach|lssd|disk|packagevalidation|ssh|metadata|sql|vmspec)$"
      - "-set_exit_status=false"
- name: cit-periodics-ubuntu-pro
  cluster: gcp-guest
  decorate: true
  decoration_config:
    timeout: 8h
  annotations:
    testgrid-dashboards: googleoss-gcp-guest
    testgrid-tab-name: cit-periodics-ubuntu-pro
  interval: 8h
  spec:
    containers:
    - image: gcr.io/compute-image-tools/cloud-image-tests:latest
      imagePullPolicy: Always
      command:
      - "/manager"
      args:
      - "-parallel_count=5"
      - "-project=gcp-guest"
      - "-zone=us-central1-b"
# Please keep this field ordered by version order and arch (eg 7 -> 8 amd64 -> 8 arm64 -> 9 amd64 -> 9 arm64).
      - "-images=projects/ubuntu-os-pro-cloud/global/images/family/ubuntu-pro-1604-lts,projects/ubuntu-os-pro-cloud/global/images/family/ubuntu-pro-1804-lts,projects/ubuntu-os-pro-cloud/global/images/family/ubuntu-pro-1804-lts,projects/ubuntu-os-pro-cloud/global/images/family/ubuntu-pro-1804-lts-arm64,projects/ubuntu-os-pro-cloud/global/images/family/ubuntu-pro-2004-lts,projects/ubuntu-os-pro-cloud/global/images/family/ubuntu-pro-2004-lts-arm64,projects/ubuntu-os-pro-cloud/global/images/family/ubuntu-pro-2204-lts,projects/ubuntu-os-pro-cloud/global/images/family/ubuntu-pro-2204-lts-arm64,projects/ubuntu-os-pro-cloud/global/images/family/ubuntu-pro-2404-lts-amd64,projects/ubuntu-os-pro-cloud/global/images/family/ubuntu-pro-2404-lts-arm64"
      - "-test_projects=compute-image-test-pool-002,compute-image-test-pool-003,compute-image-test-pool-004,compute-image-test-pool-005"
      - "-filter=^(cvm|livemigrate|suspendresume|loadbalancer|guestagent|hostnamevalidation|imageboot|licensevalidation|network|security|hotattach|lssd|disk|packagevalidation|ssh|metadata|sql|vmspec)$"
      - "-set_exit_status=false"
- name: cit-periodics-windows-client
  cluster: gcp-guest
  decorate: true
  decoration_config:
    timeout: 8h
  annotations:
    testgrid-dashboards: googleoss-gcp-guest
    testgrid-tab-name: cit-periodics-windows-client
  interval: 8h
  spec:
    containers:
    - image: gcr.io/compute-image-tools/cloud-image-tests:latest
      imagePullPolicy: Always
      command:
      - "/manager"
      args:
      - "-parallel_count=10"
      - "-project=gcp-guest"
      - "-zone=us-central1-b"
# Please keep this field ordered by Server OS then client and order by OS version release within those families.
      - "-images=projects/gce-windows-client-images/global/images/family/windows-11-24h2-x64,projects/gce-windows-client-images/global/images/family/windows-11-23h2-x64,projects/gce-windows-client-images/global/images/family/windows-11-22h2-x64,projects/gce-windows-client-images/global/images/family/windows-11-21h2-x64,projects/gce-windows-client-images/global/images/family/windows-10-22h2-x64,projects/gce-windows-client-images/global/images/family/windows-10-21h2-x64"
      - "-test_projects=compute-image-test-pool-002,compute-image-test-pool-003,compute-image-test-pool-004,compute-image-test-pool-005"
      - "-filter=^(cvm|livemigrate|suspendresume|loadbalancer|guestagent|hostnamevalidation|imageboot|licensevalidation|network|security|hotattach|lssd|disk|packagevalidation|ssh|metadata|sql|vmspec)$"
      - "-set_exit_status=false"
- name: cit-periodics-windows-server
  cluster: gcp-guest
  decorate: true
  decoration_config:
    timeout: 8h
  annotations:
    testgrid-dashboards: googleoss-gcp-guest
    testgrid-tab-name: cit-periodics-windows-server
  interval: 8h
  spec:
    containers:
    - image: gcr.io/compute-image-tools/cloud-image-tests:latest
      imagePullPolicy: Always
      command:
      - "/manager"
      args:
      - "-parallel_count=5"
      - "-project=gcp-guest"
      - "-zone=us-central1-b"
# Please keep this field ordered by OS version. (2019 -> 2019 core -> 2022...)
      - "-images=projects/windows-cloud/global/images/family/windows-2016,projects/windows-cloud/global/images/family/windows-2016-core,projects/windows-cloud/global/images/family/windows-2019,projects/windows-cloud/global/images/family/windows-2019-core,projects/windows-cloud/global/images/family/windows-2022,projects/windows-cloud/global/images/family/windows-2022-core,projects/bct-prod-images/global/images/family/windows-2025,projects/bct-prod-images/global/images/family/windows-2025-core"
      - "-test_projects=compute-image-test-pool-002,compute-image-test-pool-003,compute-image-test-pool-004,compute-image-test-pool-005"
      - "-filter=^(cvm|livemigrate|suspendresume|loadbalancer|guestagent|hostnamevalidation|imageboot|licensevalidation|network|security|hotattach|lssd|disk|packagevalidation|ssh|metadata|sql|vmspec)$"
      - "-set_exit_status=false"
- name: oslogin-periodics
  cluster: gcp-guest
  decorate: true
  decoration_config:
    timeout: 2h
  annotations:
    testgrid-dashboards: googleoss-gcp-guest
    testgrid-tab-name: oslogin-periodics
  interval: 12h
  spec:
    containers:
      - image: gcr.io/compute-image-tools/cloud-image-tests:latest
        imagePullPolicy: Always
        command:
        - "/manager"
        args:
        - "-project=oslogin-cit"
        - "-zone=us-central1-b"
# Same as cit-periodics but without Windows
        - "-images=projects/debian-cloud/global/images/family/debian-11,projects/debian-cloud/global/images/family/debian-12,projects/debian-cloud/global/images/family/debian-12-arm64,projects/centos-cloud/global/images/family/centos-stream-9,projects/rhel-cloud/global/images/family/rhel-8,projects/rhel-cloud/global/images/family/rhel-9,projects/rhel-cloud/global/images/family/rhel-9-arm64,projects/rocky-linux-cloud/global/images/family/rocky-linux-8,projects/rocky-linux-cloud/global/images/family/rocky-linux-8-optimized-gcp,projects/rocky-linux-cloud/global/images/family/rocky-linux-8-optimized-gcp-arm64,projects/rocky-linux-cloud/global/images/family/rocky-linux-9,projects/rocky-linux-cloud/global/images/family/rocky-linux-9-optimized-gcp,projects/rocky-linux-cloud/global/images/family/rocky-linux-9-arm64,projects/rocky-linux-cloud/global/images/family/rocky-linux-9-optimized-gcp-arm64,projects/almalinux-cloud/global/images/family/almalinux-8,projects/almalinux-cloud/global/images/family/almalinux-9,projects/opensuse-cloud/global/images/family/opensuse-leap,projects/opensuse-cloud/global/images/family/opensuse-leap-arm64,projects/suse-cloud/global/images/family/sles-12,projects/suse-cloud/global/images/family/sles-15,projects/suse-cloud/global/images/family/sles-15-arm64,projects/ubuntu-os-pro-cloud/global/images/family/ubuntu-pro-1604-lts,projects/ubuntu-os-pro-cloud/global/images/family/ubuntu-pro-1804-lts,projects/ubuntu-os-pro-cloud/global/images/family/ubuntu-pro-1804-lts,projects/ubuntu-os-pro-cloud/global/images/family/ubuntu-pro-1804-lts-arm64,projects/ubuntu-os-cloud/global/images/family/ubuntu-2204-lts,projects/ubuntu-os-cloud/global/images/family/ubuntu-2204-lts-arm64,projects/ubuntu-os-cloud/global/images/family/ubuntu-2404-lts-amd64,projects/ubuntu-os-cloud/global/images/family/ubuntu-2404-lts-arm64"
        - "-filter=oslogin"
        - "-set_exit_status=false"
- name: testingrepo-packageupgrade
  cluster: gcp-guest
  decorate: true
  decoration_config:
    timeout: 6h
  annotations:
    testgrid-dashboards: googleoss-gcp-guest
    testgrid-tab-name: testingrepo-packageupgrade
  interval: 6h
  spec:
    containers:
    - image: gcr.io/compute-image-tools/cloud-image-tests:latest
      imagePullPolicy: Always
      command:
      - "/manager"
      args:
      - "-parallel_count=5"
      - "-project=gcp-guest"
      - "-zone=us-central1-b"
      - "-images=projects/bct-prod-images/global/images/family/windows-2012-r2,projects/bct-prod-images/global/images/family/windows-2016,projects/bct-prod-images/global/images/family/windows-2019,projects/bct-prod-images/global/images/family/windows-2022,projects/bct-prod-images/global/images/windows-server-2012-r2-dc-v20230505-cit,projects/bct-prod-images/global/images/windows-server-2022-dc-v20220615-cit,projects/bct-prod-images/global/images/windows-server-2019-dc-v20220615-cit,projects/bct-prod-images/global/images/windows-server-2016-dc-v20220615-cit"
      - "-test_projects=compute-image-test-pool-002,compute-image-test-pool-003,compute-image-test-pool-004,compute-image-test-pool-005"
      - "-filter=packageupgrade"
- name: ubuntu-daily-cit-performance
  cluster: gcp-guest
  decorate: true
  decoration_config:
    timeout: 24h
  annotations:
    testgrid-dashboards: googleoss-gcp-guest
    testgrid-tab-name: ubuntu-daily-cit-performance
  interval: 72h # 3 days
  spec:
    containers:
    - image: gcr.io/compute-image-tools/cloud-image-tests:latest
      imagePullPolicy: Always
      command:
      - "/manager"
      args:
      - "-parallel_count=2"
      - "-project=gcp-guest"
      - "-test_projects=compute-image-test-pool-002,compute-image-test-pool-003,compute-image-test-pool-004,compute-image-test-pool-005"
      - "-zone=us-central1-b"
      - "-filter=perf"
      - "-storageperf_test_filter=(?i)^(([a-z][0-3])|n4)"
      - "-networkperf_test_filter=(?i)^(([a-z][0-3])|n4)"
# gcloud compute images list --project ubuntu-os-cloud-devel --no-standard-images | tail -n +2 | awk '{print "projects/"$2"/global/images/family/"$3}' | sort -u | tr "\n" ,
      - "-images=projects/ubuntu-os-cloud-devel/global/images/family/ubuntu-2004-lts,projects/ubuntu-os-cloud-devel/global/images/family/ubuntu-2004-lts-arm64,projects/ubuntu-os-cloud-devel/global/images/family/ubuntu-2204-lts,projects/ubuntu-os-cloud-devel/global/images/family/ubuntu-2204-lts-arm64,projects/ubuntu-os-cloud-devel/global/images/family/ubuntu-2404-lts-amd64,projects/ubuntu-os-cloud-devel/global/images/family/ubuntu-2404-lts-arm64,projects/ubuntu-os-cloud-devel/global/images/family/ubuntu-minimal-2004-lts,projects/ubuntu-os-cloud-devel/global/images/family/ubuntu-minimal-2004-lts-arm64,projects/ubuntu-os-cloud-devel/global/images/family/ubuntu-minimal-2204-lts,projects/ubuntu-os-cloud-devel/global/images/family/ubuntu-minimal-2204-lts-arm64,projects/ubuntu-os-cloud-devel/global/images/family/ubuntu-minimal-2404-lts-amd64,projects/ubuntu-os-cloud-devel/global/images/family/ubuntu-minimal-2404-lts-arm64,projects/ubuntu-os-cloud-devel/global/images/family/ubuntu-minimal-2410-amd64,projects/ubuntu-os-cloud-devel/global/images/family/ubuntu-minimal-2410-arm64"
- name: ubuntu-daily-cit-shapevalidation
  cluster: gcp-guest
  decorate: true
  decoration_config:
    timeout: 4h
  annotations:
    testgrid-dashboards: googleoss-gcp-guest
    testgrid-tab-name: ubuntu-daily-cit-shapevalidation
  interval: 24h
  spec:
    containers:
    - image: gcr.io/compute-image-tools/cloud-image-tests:latest
      imagePullPolicy: Always
      command:
      - "/manager"
      args:
      - "-parallel_count=10"
      - "-project=gcp-guest"
      - "-test_projects=compute-image-test-pool-002,compute-image-test-pool-003,compute-image-test-pool-004,compute-image-test-pool-005"
      - "-zone=us-central1-b"
      - "-filter=shapevalidation"
      - "-shapevalidation_test_filter=(?i)^(([a-z][0-3])|n4)"
      - "-images=projects/ubuntu-os-cloud-devel/global/images/family/ubuntu-2004-lts,projects/ubuntu-os-cloud-devel/global/images/family/ubuntu-2004-lts-arm64,projects/ubuntu-os-cloud-devel/global/images/family/ubuntu-2204-lts,projects/ubuntu-os-cloud-devel/global/images/family/ubuntu-2204-lts-arm64,projects/ubuntu-os-cloud-devel/global/images/family/ubuntu-2404-lts-amd64,projects/ubuntu-os-cloud-devel/global/images/family/ubuntu-2404-lts-arm64,projects/ubuntu-os-cloud-devel/global/images/family/ubuntu-minimal-2004-lts,projects/ubuntu-os-cloud-devel/global/images/family/ubuntu-minimal-2004-lts-arm64,projects/ubuntu-os-cloud-devel/global/images/family/ubuntu-minimal-2204-lts,projects/ubuntu-os-cloud-devel/global/images/family/ubuntu-minimal-2204-lts-arm64,projects/ubuntu-os-cloud-devel/global/images/family/ubuntu-minimal-2404-lts-amd64,projects/ubuntu-os-cloud-devel/global/images/family/ubuntu-minimal-2404-lts-arm64,projects/ubuntu-os-cloud-devel/global/images/family/ubuntu-minimal-2410-amd64,projects/ubuntu-os-cloud-devel/global/images/family/ubuntu-minimal-2410-arm64"
