periodics:
- name: gcsfuse-pytorch-dino-periodic
  cluster: gcsfuse-prow-test
  interval: 7d
  decorate: true
  annotations:
    testgrid-dashboards: gcsfuse
    testgrid-tab-name: pytorch-dino-periodic
    description: "Runs pytorch dino model every 7 days using gcsfuse."
    spec:
      containers:
      - name: pytorch-dino-model
        image: us-west1-docker.pkg.dev/gcs-fuse-test-ml/test-images/pytorch-dino:latest
        securityContext:
          privileged: true
        command:
        - "/bin/sh"
        - "-c"
        - ./setup_container.sh;
        resources:
          limits:
            cpu: "22"
            memory: 120Gi
            nvidia.com/gpu: "2"
          requests:
            cpu: "22"
            memory: 120Gi
            nvidia.com/gpu: "2"
        volumeMounts:
        - name: dshm
          mountPath: /dev/shm
      volumes:
      - name: dshm
        emptyDir:
          medium: Memory
          sizeLimit: 128Gi

